extends ../_layout

block app-title
    | Event | EventManagementSystem

block vars
   - var bodyClass = 'event-detail';

block additionalCss
    link(rel="stylesheet", href="/static/styles/event-details.css")

block content
    .top-container
        .inner-bg
            .container
                .row
                    .col-sm-12.title
                        h1= event.name
                    div(class='event-info' id=event.id)
                        if event.coverUrls[0]
                            img(src= event.coverUrls[0])
                        else
                            img(src= event.coverUrl)
                        p='Date: ' + event.dateOfEvent.getFullYear() + '/' + (event.dateOfEvent.getMonth() + 1) + '/' + event.dateOfEvent.getDate()
                        p='Time: ' + (event.dateOfEvent.getHours()<10?'0':'') + event.dateOfEvent.getHours() + ':' + (event.dateOfEvent.getMinutes()<10?'0':'') + event.dateOfEvent.getMinutes() + 'h'
                        p='Description: ' + event.description
                        p='Country: ' + event.country.name
                        p='City: ' + event.city.name
                        p='Address: ' + event.address
                        if(event.capacity)
                            p='Capacity: ' +  event.capacity
                        else
                            p='Capacity: unlimited'
                        p='Author: ' + event.user.name

                        if user
                            if hasAlreadySubscribed
                                button(type="button" class="btn btn-success"  id="unsubscribe-button") Subscribed
                            else
                                button(type="button" class="btn"  id="subscribe-button") Subscribe
                            if isLiked
                                a(class='like-btn btn btn-default btn-primary')
                                    span(class='glyphicon glyphicon-thumbs-up')
                                    span(class='likes')= event.usersWhoLikeThis.length
                            else
                                a(class='like-btn btn btn-default')
                                    span(class='glyphicon glyphicon-thumbs-up')
                                    span(class='likes')= event.usersWhoLikeThis.length
                            if isDisliked
                                a(class='dislike-btn btn btn-default btn-primary')
                                    span(class='glyphicon glyphicon-thumbs-down')
                                    span(class='dislikes')= event.usersWhoDislikeThis.length
                            else
                                a(class='dislike-btn btn btn-default')
                                    span(class='glyphicon glyphicon-thumbs-down')
                                    span(class='dislikes')= event.usersWhoDislikeThis.length
                        br
                        br
                        textarea(type="text"
                            name="comment"
                            placeholder="Comment.."
                            class="form-comment form-control"
                            id="comment-textarea")
                        span.error.error-firstname
                        br
                        button(type="button" class="btn" id="comment-button") Add Comment
                        if event.comments
                            h2='Comments'
                            div(id="comments")
                                each comment in event.comments
                                    p='Comment: ' + comment.text + ' ' + 'Author: ' + comment.author

block specificJs
    script(src="/static/scripts/events/comment-event.js")
    script(src="/static/scripts/events/subscribe-for-event.js")
    script(src="/static/scripts/utils/validator.js")
    script(src="/static/scripts/events/rate-event.js")